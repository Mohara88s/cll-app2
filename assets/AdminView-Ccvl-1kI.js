import{u as z,a as l,r as j,j as e,B as T,S as F,a1 as u,h as q}from"./index-lRq4B2S0.js";import{F as o,E as S}from"./ErrorMessage-Bl72mUpP.js";import{j as d,a as I,b as G,u as H,d as K,f as $,C as O}from"./ChooseLanguages-C9JCi1RK.js";import{c as A}from"./Confirmation-BM5hsDGA.js";import{D as J}from"./Dropdown-CqvND0UQ.js";import{M as L}from"./Modal-Dqvi3MK3.js";import{T as P}from"./Table-i0ZAr2nr.js";import{T as R,a as D}from"./Tabs-CFbBUaR8.js";import"./useWindow-CFgY2ZsE.js";import"./InputGroupContext-BdiVvw1G.js";const V="_jokeTitle_1r5n0_1",Q="_dropdown_1r5n0_4",U="_form__deleteButton_1r5n0_7",W="_mainButtonsBox_1r5n0_10",X="_mainButtonsBox__button_1r5n0_14",M={jokeTitle:V,dropdown:Q,form__deleteButton:U,mainButtonsBox:W,mainButtonsBox__button:X};function Y(){const i=z(),m=l(d.getJokeTasksLanguages),r=l(d.getJokeTasksLanguagesError),y=l(d.getJokeTasksLanguagesLoading),x=l(d.getJokeTasksError),f=l(d.getJokeTasksLoading);j.useEffect(()=>{i(I())},[i]);const t=l(d.getJokeTask),B=()=>{const n=t.translations[t.translations.length-1]._id+1,s=[...t.translations,{_id:n,language:"",title:"",text:""}];i(u({...t,translations:s}))},b=async({target:{name:n}})=>{if(await A("Are you sure you want to delete this translation field?")&&t.translations.length>2){const s=[...t.translations].filter(_=>_._id!==Number(n));i(u({...t,translations:s}))}},w=async()=>{await A("Are you sure you want to add this task?")&&i(G({...t}))},p=({target:{name:n,value:s,type:_}})=>{switch(n){case"jokeName":return i(u({...t,task_title:s}));case n:if(_==="textarea"){const h=[...t.translations].map(a=>a._id===Number(n)?{...a,text:s}:a);i(u({...t,translations:h}))}if(_==="text"){const h=[...t.translations].map(a=>a._id===Number(n)?{...a,title:s}:a);i(u({...t,translations:h}))}return;default:return}},v=({target:{name:n,title:s}})=>{const _=m.find(a=>a._id===n),h=[...t.translations].map(a=>a._id===Number(s)?{...a,language:_}:a);i(u({...t,translations:h}))};return e.jsxs("div",{children:[e.jsxs(o,{autoComplete:"off",className:M.form,children:[e.jsxs(o.Group,{className:"mb-3",children:[e.jsx(o.Label,{children:"Enter the name of the joke in English:"}),e.jsx(o.Control,{type:"text",name:"jokeName",placeholder:"Enter the name of the joke",value:t.task_title,onChange:p})]}),t&&e.jsx("ul",{children:t.translations.map(n=>e.jsxs("li",{children:[e.jsxs(o.Group,{className:"mb-3",children:[e.jsx(o.Label,{children:"Choose the language and enter the version of the joke in the current language:"}),e.jsxs(J,{className:M.dropdown,children:[e.jsx(J.Toggle,{variant:"outline-dark",size:"sm",id:"dropdown-basic",children:n.language.language_name?n.language.language_name:"Langauage"}),e.jsx(J.Menu,{children:e.jsx("ul",{children:m.map(s=>e.jsx("li",{children:e.jsx(J.Item,{name:s._id,title:n._id,onClick:v,children:s.language_name})},s._id))})})]}),e.jsx(o.Control,{type:"text",name:n._id,placeholder:"Enter the name of the joke in current language",value:n.title,onChange:p,className:M.jokeTitle}),e.jsx(o.Control,{as:"textarea",rows:5,name:n._id,placeholder:"joke in current language",value:n.text,onChange:p})]}),e.jsx(T,{variant:"danger",onClick:b,className:M.form__deleteButton,name:n._id,children:"Delete"})]},n._id))})]}),e.jsxs("div",{className:M.mainButtonsBox,children:[e.jsx(T,{variant:"success",onClick:B,className:M.mainButtonsBox__button,children:"Add one more translation of the joke"}),e.jsxs(T,{variant:"primary",className:M.mainButtonsBox__button,onClick:w,children:[!f&&e.jsx("span",{children:"Add this joke to the database"}),f&&e.jsx(F,{animation:"border",as:"span",size:"sm"})]})]}),x&&e.jsx(S,{message:x}),r&&e.jsx(S,{message:r}),y&&e.jsx(F,{animation:"border",as:"span",size:"sm"})]})}const Z="_editingJokeModal_eusqn_1",ee="_editingJokeModal__header_eusqn_4",te="_editingJokeModal__body_eusqn_7",ae="_editingJokeModal__dropdown_eusqn_12",ne="_editingJokeModalForm__label_eusqn_16",se="_editingJokeModalForm__jokeTitle_eusqn_19",oe="_editingJokeModalForm__deleteButton_eusqn_22",ie="_editingJokeModalMainButtonsBox_eusqn_25",re="_editingJokeModalMainButtonsBox__button_eusqn_29",k={editingJokeModal:Z,editingJokeModal__header:ee,editingJokeModal__body:te,editingJokeModal__dropdown:ae,editingJokeModalForm__label:ne,editingJokeModalForm__jokeTitle:se,editingJokeModalForm__deleteButton:oe,editingJokeModalMainButtonsBox:ie,editingJokeModalMainButtonsBox__button:re},le=({modalShow:i,onHandleClose:m})=>{const r=z(),[y,x]=j.useState(!1),f=l(d.getJokeTasksLanguages),t=l(d.getJokeTask),B=l(d.getJokeTasksError),b=l(d.getJokeTasksLoading),w=()=>{x(!1),m()};j.useEffect(()=>{x(i)},[i]),j.useEffect(()=>{t.task_title||w()},[t]);const p=()=>{const a=t.translations[t.translations.length-1]._id+1,c=[...t.translations,{_id:a,language:"",title:"",text:""}];r(u({...t,translations:c}))},v=async({target:{name:a}})=>{if(await A("Are you sure you want to delete this translation field?")&&t.translations.length>2){const c=[...t.translations].filter(C=>C._id!==a);r(u({...t,translations:c}))}},n=async()=>{await A("Are you sure you want to save changes to this task?")&&r(H({taskId:t._id,update:{...t}}))},s=async()=>{await A("Are you sure you want to delete this task?")&&r(K(t._id))},_=({target:{name:a,value:c,type:C}})=>{switch(a){case"jokeName":return r(u({...t,task_title:c}));case a:if(C==="textarea"){const E=[...t.translations].map(g=>g._id===a?{...g,text:c}:g);r(u({...t,translations:E}))}if(C==="text"){const E=[...t.translations].map(g=>g._id===a?{...g,title:c}:g);r(u({...t,translations:E}))}return;default:return}},h=({target:{name:a,title:c}})=>{const C=f.find(g=>g._id===a),E=[...t.translations].map(g=>g._id===c?{...g,language:C}:g);r(u({...t,translations:E}))};return e.jsx(e.Fragment,{children:t&&e.jsxs(L,{show:y,onHide:w,centered:!0,className:k.editingJokeModal,dialogClassName:"EditingJokeTaskModalDialog",children:[e.jsx(L.Header,{closeButton:!0,className:k.editingJokeModal__header,children:e.jsxs(L.Title,{children:["Joke task Id:",t._id]})}),e.jsxs(L.Body,{className:k.editingJokeModal__body,children:[e.jsxs(o,{autoComplete:"off",className:k.editingJokeModalForm,children:[e.jsxs(o.Group,{className:"mb-3",children:[e.jsx(o.Label,{children:"The name of the joke in English:"}),e.jsx(o.Control,{type:"text",name:"jokeName",placeholder:"Enter the name of the joke",value:t.task_title,onChange:_})]}),t&&e.jsx("ul",{children:t.translations.map(a=>e.jsxs("li",{children:[e.jsxs(o.Group,{className:"mb-3",children:[e.jsxs(o.Label,{className:k.editingJokeModalForm__label,children:["The version of the joke in the",e.jsxs(J,{className:k.editingJokeModal__dropdown,children:[e.jsx(J.Toggle,{variant:"outline-dark",size:"sm",id:"dropdown-basic",children:a.language.language_name?a.language.language_name:"Langauage"}),e.jsx(J.Menu,{children:e.jsx("ul",{children:f.map(c=>e.jsx("li",{children:e.jsx(J.Item,{name:c._id,title:a._id,onClick:h,children:c.language_name})},c._id))})})]})," ","language:"]}),e.jsx(o.Control,{type:"text",name:a._id,placeholder:"Enter the name of the joke in current language",value:a.title,onChange:_,className:k.editingJokeModalForm__jokeTitle}),e.jsx(o.Control,{as:"textarea",rows:5,name:a._id,placeholder:"joke in current language",value:a.text,onChange:_})]}),e.jsx(T,{variant:"danger",onClick:v,className:k.editingJokeModalForm__deleteButton,name:a._id,children:"Delete"})]},a._id))})]}),e.jsxs("div",{className:k.editingJokeModalMainButtonsBox,children:[e.jsx(T,{variant:"success",onClick:p,className:k.editingJokeModalMainButtonsBox__button,children:"Add one more translation of the joke"}),e.jsxs(T,{variant:"danger",className:k.editingJokeModalMainButtonsBox__button,onClick:s,children:[!b&&e.jsx("span",{children:"Delete task from the database"}),b&&e.jsx(F,{animation:"border",as:"span",size:"sm"})]}),e.jsxs(T,{variant:"primary",className:k.editingJokeModalMainButtonsBox__button,onClick:n,children:[!b&&e.jsx("span",{children:"Save changes to the database"}),b&&e.jsx(F,{animation:"border",as:"span",size:"sm"})]})]}),B&&e.jsx(S,{message:B})]})]})})},de="_tasksFilter_6zjye_1",ce="_table_6zjye_4",_e="_table__tbody_6zjye_4",ge="_tableTd__english_6zjye_7",ue="_tableTd__secondary_6zjye_10",ke="_tableTd__button_6zjye_14",N={tasksFilter:de,table:ce,table__tbody:_e,tableTd__english:ge,tableTd__secondary:ue,tableTd__button:ke};function he(){const i=z(),m=l(d.getOriginalLanguage),r=l(d.getTranslationLanguage),y=l(d.getJokeTasks),x=l(d.getJokeTasksError),f=l(d.getJokeTasksLoading),t=l(d.getJokeTasksFilter),[B,b]=j.useState([]),[w,p]=j.useState(!1),v=({target:{value:s}})=>{i(q(s))},n=({target:{name:s}})=>{const _=B.find(h=>h._id===s);i(u({..._})),p(!0)};return j.useEffect(()=>{m!==null&&r!==null&&i($(t,m.language_name,r.language_name))},[i,t,m,r]),j.useEffect(()=>{b(y)},[y]),e.jsxs("div",{className:N.tasksFilter,children:[e.jsx(o,{autoComplete:"off",children:e.jsxs(o.Group,{className:"mb-3",controlId:"filter",children:[e.jsx(o.Label,{children:"Jokes search:"}),e.jsx(o.Control,{type:"text",name:"filter",placeholder:"Enter letters for joke search",value:t,onChange:v})]})}),e.jsxs(P,{striped:!0,bordered:!0,hover:!0,className:N.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:N.tableTd__english,children:"Title"}),e.jsx("td",{className:N.tableTd__languages,children:"Translations"}),e.jsx("td",{className:N.tableTd__button})]})}),!f&&e.jsx("tbody",{className:N.table__tbody,children:B.map(({_id:s,task_title:_,languages:h})=>e.jsxs("tr",{children:[e.jsx("td",{children:_}),e.jsx("td",{children:[...h].sort((a,c)=>a.language_name.localeCompare(c.language_name)).map(({language_name:a})=>e.jsxs("span",{children:[a,"/"]},a))}),e.jsx("td",{children:e.jsx(T,{name:s,onClick:n,variant:"warning",children:"Edit"})})]},s))})]}),x&&e.jsx(S,{message:x}),f&&e.jsx(F,{animation:"border",variant:"primary"}),e.jsx(le,{modalShow:w,onHandleClose:()=>p(!1)})]})}function me(){return e.jsxs("div",{children:[e.jsx(O,{}),e.jsx(he,{})]})}function je(){j.useEffect(()=>{window.scrollBy(0,-1e3)},[]);const[i,m]=j.useState("joke-task-form");return e.jsxs("div",{children:[e.jsx("h2",{children:"Administrator page"}),e.jsxs(R,{id:"admin-tabs",activeKey:i,onSelect:r=>m(r),className:"mb-3",children:[e.jsx(D,{eventKey:"joke-task-form",title:"Form to adding joke task",children:e.jsx(Y,{})}),e.jsx(D,{eventKey:"editing-joke-task",title:"Editing joke tasks",children:e.jsx(me,{})})]})]})}function Ce(){return e.jsx(e.Fragment,{children:e.jsx(je,{})})}export{Ce as default};
//# sourceMappingURL=AdminView-Ccvl-1kI.js.map
