{"version":3,"file":"PasswordResetView-enzTqHTv.js","sources":["../../src/components/PasswordReset/PasswordReset.jsx","../../src/views/PasswordResetView/PasswordResetView.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  passwordResetApplication,\n  passwordChange,\n} from '../../redux/auth/auth-operations';\nimport authSelectors from '../../redux/auth/auth-selectors';\nimport { Button, Form, Spinner } from 'react-bootstrap';\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\nimport styles from './PasswordReset.module.css';\n\nexport default function PasswordReset() {\n  useEffect(() => {\n    window.scrollBy(0, -1000);\n  }, []);\n  const dispatch = useDispatch();\n  const url = window.location.href;\n  const winLocSearch = window.location.search;\n  const token = window.location.search.split('&')[1];\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const passwordResetResult = useSelector(\n    authSelectors.getPasswordResetApplication,\n  );\n  const passwordChangeResult = useSelector(authSelectors.getPasswordChange);\n  const error = useSelector(authSelectors.getPasswordChangeError);\n  const loading = useSelector(authSelectors.getLoading);\n\n  const handleChange = ({ target: { name, value } }) => {\n    switch (name) {\n      case 'email':\n        return setEmail(value);\n      case 'password':\n        return setPassword(value);\n      default:\n        return;\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!winLocSearch && email.length) {\n      await dispatch(passwordResetApplication({ email, url }));\n    }\n    if (winLocSearch && password.length) {\n      await dispatch(passwordChange(token, { password: password }));\n    }\n  };\n\n  return (\n    <div className={styles.passwordReset}>\n      <h2>Password reset</h2>\n\n      <Form onSubmit={handleSubmit} className={styles.form} autoComplete=\"off\">\n        {!winLocSearch && (\n          <Form.Group className=\"mb-3\" controlId=\"email\">\n            <Form.Label>Email</Form.Label>\n            <Form.Control\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Enter email\"\n              value={email}\n              onChange={handleChange}\n            />\n          </Form.Group>\n        )}\n        {winLocSearch && (\n          <Form.Group className=\"mb-3\" controlId=\"password\">\n            <Form.Label>New password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Enter password\"\n              value={password}\n              onChange={handleChange}\n            />\n          </Form.Group>\n        )}\n        <Button className={styles.button} type=\"submit\">\n          {!loading && (\n            <span>\n              {winLocSearch\n                ? 'Change the password'\n                : 'Apply for the password change'}\n            </span>\n          )}\n          {loading && <Spinner animation=\"border\" as=\"span\" size=\"sm\" />}\n        </Button>\n      </Form>\n      {passwordResetResult && <p>{passwordResetResult}</p>}\n      {passwordChangeResult && <p>{passwordChangeResult}</p>}\n      {error && <ErrorMessage message={error} />}\n    </div>\n  );\n}\n","import PasswordReset from '../../components/PasswordReset/PasswordReset';\n\nexport default function PasswordResetView() {\n  return (\n    <>\n      <PasswordReset />\n    </>\n  );\n}\n"],"names":["PasswordReset","useEffect","dispatch","useDispatch","url","winLocSearch","token","email","setEmail","useState","password","setPassword","passwordResetResult","useSelector","authSelectors","passwordChangeResult","error","loading","handleChange","name","value","handleSubmit","e","passwordResetApplication","passwordChange","jsxs","styles","jsx","Form","Button","Spinner","ErrorMessage","PasswordResetView","Fragment"],"mappings":"oOAWA,SAAwBA,GAAgB,CACtCC,EAAAA,UAAU,IAAM,CACP,OAAA,SAAS,EAAG,IAAK,CAC1B,EAAG,EAAE,EACL,MAAMC,EAAWC,EAAY,EACvBC,EAAM,OAAO,SAAS,KACtBC,EAAe,OAAO,SAAS,OAC/BC,EAAQ,OAAO,SAAS,OAAO,MAAM,GAAG,EAAE,CAAC,EAC3C,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAE,EACrCG,EAAsBC,EAC1BC,EAAc,2BAChB,EACMC,EAAuBF,EAAYC,EAAc,iBAAiB,EAClEE,EAAQH,EAAYC,EAAc,sBAAsB,EACxDG,EAAUJ,EAAYC,EAAc,UAAU,EAE9CI,EAAe,CAAC,CAAE,OAAQ,CAAE,KAAAC,EAAM,MAAAC,CAAA,KAAc,CACpD,OAAQD,EAAM,CACZ,IAAK,QACH,OAAOX,EAASY,CAAK,EACvB,IAAK,WACH,OAAOT,EAAYS,CAAK,EAC1B,QACE,MAAA,CAEN,EAEMC,EAAe,MAAMC,GAAK,CAC9BA,EAAE,eAAe,EACb,CAACjB,GAAgBE,EAAM,QACzB,MAAML,EAASqB,EAAyB,CAAE,MAAAhB,EAAO,IAAAH,CAAK,CAAA,CAAC,EAErDC,GAAgBK,EAAS,QAC3B,MAAMR,EAASsB,EAAelB,EAAO,CAAE,SAAAI,CAAoB,CAAA,CAAC,CAEhE,EAEA,OACGe,EAAAA,KAAA,MAAA,CAAI,UAAWC,EAAO,cACrB,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAc,gBAAA,CAAA,EAElBF,EAAAA,KAACG,GAAK,SAAUP,EAAc,UAAWK,EAAO,KAAM,aAAa,MAChE,SAAA,CAAC,CAAArB,UACCuB,EAAK,MAAL,CAAW,UAAU,OAAO,UAAU,QACrC,SAAA,CAACD,EAAAA,IAAAC,EAAK,MAAL,CAAW,SAAK,OAAA,CAAA,EACjBD,EAAA,IAACC,EAAK,QAAL,CACC,KAAK,QACL,KAAK,QACL,YAAY,cACZ,MAAOrB,EACP,SAAUW,CAAA,CAAA,CACZ,EACF,EAEDb,UACEuB,EAAK,MAAL,CAAW,UAAU,OAAO,UAAU,WACrC,SAAA,CAACD,EAAAA,IAAAC,EAAK,MAAL,CAAW,SAAY,cAAA,CAAA,EACxBD,EAAA,IAACC,EAAK,QAAL,CACC,KAAK,WACL,KAAK,WACL,YAAY,iBACZ,MAAOlB,EACP,SAAUQ,CAAA,CAAA,CACZ,EACF,SAEDW,EAAO,CAAA,UAAWH,EAAO,OAAQ,KAAK,SACpC,SAAA,CAAA,CAACT,GACAU,EAAA,IAAC,OACE,CAAA,SAAAtB,EACG,sBACA,gCACN,EAEDY,SAAYa,EAAQ,CAAA,UAAU,SAAS,GAAG,OAAO,KAAK,IAAK,CAAA,CAAA,CAC9D,CAAA,CAAA,EACF,EACClB,GAAwBe,EAAAA,IAAA,IAAA,CAAG,SAAoBf,CAAA,CAAA,EAC/CG,GAAyBY,EAAAA,IAAA,IAAA,CAAG,SAAqBZ,CAAA,CAAA,EACjDC,GAASW,EAAAA,IAACI,EAAa,CAAA,QAASf,CAAO,CAAA,CAAA,EAC1C,CAEJ,CC5FA,SAAwBgB,GAAoB,CAExC,OAAAL,EAAAA,IAAAM,EAAAA,SAAA,CACE,SAACN,EAAAA,IAAA3B,EAAA,CAAc,CAAA,EACjB,CAEJ"}